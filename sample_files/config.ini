[NDBD DEFAULT] 
AutomaticThreadConfig=true

# Instead of AutomaticMemoryConfig=true, set memory boundaries very low:
TotalMemoryConfig=2800M
MaxNoOfTables=384
MaxNoOfAttributes=8000
MaxNoOfTriggers=4000
TransactionMemory=200M
SharedGlobalMemory=200M

# Decrease the REDO log files from 64GB to 2GB
# Size of the REDO log is NoOfFragmentLogParts * NoOfFragmentLogFiles * FragmentLogFileSize
# A smaller REDO log means one will have to be more active in checkpointing and at really high loads 
# one needs a larger REDO log, but in development 2 GB should be quite sufficient. In production
# 64 GB is more or less always enough.
NoOfFragmentLogFiles=8
FragmentLogFileSize=64M

# Can potentially avoid some crashes
# LockPagesInMemory=0

NoOfReplicas=2

# Setting this parameter to TRUE or 1 binds IP_ADDR_ANY so that connections can be made from anywhere (for autogenerated connections). The default is FALSE (0).
TcpBind_INADDR_ANY=FALSE

MaxNoOfConcurrentOperations=200000
MaxDMLOperationsPerTransaction=32K

MaxNoOfConcurrentScans=500

#The maximum time in ms that is permitted to lapse between operations in the same transaction before the transaction is aborted.
TransactionInactiveTimeout=1500

TransactionDeadlockDetectionTimeout=1500

#0: Disables locking. This is the default value.
#1: Performs the lock after allocating memory for the process.
#2: Performs the lock before memory for the process is allocated.
# Needs root privileges
LockPagesInMainMemory=1

# Savings of up to 500ver noncompressed LCPs and backups
CompressedLCP=0
CompressedBackup=1

BackupLogBufferSize= 16M

# The maximum size of the memory unit to use when allocating memory for tables
MaxAllocate=32M

# Needs root privileges
ODirect=0

Numa=1

# Move this to another drive if you have a high number of ops/sec
InitialLogFileGroup=name=lg_1;undo_buffer_size=128M;undo_log_0.log:4G

# Move this to another drive to store small files in HopsFS
InitialTablespace=name=ts_1;extent_size=16M;ts_1_data_file_0.dat:8G

[MYSQLD DEFAULT]

[NDB_MGMD DEFAULT]

[TCP DEFAULT]
OverloadLimit=0

# Without this flag, ndbds could not start up if not all containers
# listed in the config.ini were running. E.g. the ndbds would try to 
# to resolve the hostname "api_1", whereby the container "api_1" has
# been stopped. The ndbd would not find anything, and then fail.
AllowUnresolvedHostnames=true

[NDB_MGMD]
NodeId=65
LocationDomainId=0
HostName=mgmd_1
PortNumber=1186
NodeActive=1
DataDir=/srv/hops/mysql-cluster/log
LogDestination=FILE:filename=/srv/hops/mysql-cluster/log/cluster.log,maxsize=10000000,maxfiles=6
ArbitrationRank=2

[NDBD]
NodeId=1
NodeGroup=0
NodeActive=1
LocationDomainId=0
HostName=ndbd_1
ServerPort=11860
DataDir=/srv/hops/mysql-cluster/log
FileSystemPath=/srv/hops/mysql-cluster/ndb_data/1
FileSystemPathDD=/srv/hops/mysql-cluster/ndb_disk_columns
BackupDataDir=/srv/hops/mysql-cluster/ndb/backups

[NDBD]
NodeId=2
NodeGroup=0
NodeActive=1
LocationDomainId=0
HostName=ndbd_2
ServerPort=11860
DataDir=/srv/hops/mysql-cluster/log
FileSystemPath=/srv/hops/mysql-cluster/ndb_data/2
FileSystemPathDD=/srv/hops/mysql-cluster/ndb_disk_columns
BackupDataDir=/srv/hops/mysql-cluster/ndb/backups

#MySQL Servers, Memcached servers, and Clusterj clients.
[MYSQLD]
NodeId=67
LocationDomainId=0
NodeActive=1
ArbitrationRank=1
HostName=mysqld_1

#MySQL Servers, Memcached servers, and Clusterj clients.
[MYSQLD]
NodeId=68
LocationDomainId=0
NodeActive=1
ArbitrationRank=1
HostName=mysqld_1

[API]
NodeId=195
LocationDomainId=0
NodeActive=1
ArbitrationRank=1
HostName=api_1

[API]
NodeId=196
LocationDomainId=0
NodeActive=1
ArbitrationRank=1
HostName=api_1
